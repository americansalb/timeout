<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>English Speaking Test</title>
</head>
<body>

  <!-- Embed the widget -->
  <elevenlabs-convai
    agent-id="agent_01jz3mzxkkfw09832nvhjtxqyy"
    pause-tool-name="PAUSE_5_Second"
    pause-endpoint="https://timeout-ri84.onrender.com/pause">
  </elevenlabs-convai>

  <!-- Load the widget SDK -->
  <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async></script>
  
  <!-- Register the client tool -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const widget = document.querySelector('elevenlabs-convai');
      if (!widget) return;

      widget.addEventListener('elevenlabs-convai:call', (ev) => {
        const { clientTools } = ev.detail.config;
        clientTools.PAUSE_5_Second = async () => {
          await fetch(widget.getAttribute('pause-endpoint'), { method: 'POST' });
          console.log('PAUSE_5_Second invoked');
          return {};
        };
      });
    });
  </script>
  
</body>
</html>
