<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>English Proficiency Test Widget</title>
  <style>
    body { margin: 0; }
  </style>
</head>
<body>
  <!-- Container where ElevenLabs will mount -->
  <div id="agent-widget"></div>

  <!-- Inject ElevenLabs config BEFORE loader -->
  <script>
    (function () {
      // 1. Read the query string IN THE IFRAME URL
      const params = new URLSearchParams(window.location.search);

      // 2. Build user_info object
      const user_info = {
        email:      params.get('email')      || '',
        first_name: params.get('first_name') || '',
        last_name:  params.get('last_name')  || ''
      };

      // 3. Expose ElevenLabs config globally
      window.elevenlabs = {
        agent: "agent_01jz3mzxkkfw09832nvhjtxqyy", // your real agent ID
        user_info
      };
    })();
  </script>

  <!-- 4. Load the official widget loader AFTER config is set -->
  <script src="https://agent.elevenlabs.io/agent-widget-loader.js"></script>
</body>
</html>
