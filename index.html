<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>English Speaking Test</title>
</head>
<body>
  <!-- Widget will render inside this tag -->
  <elevenlabs-convai
    agent-id="agent_01jz3mzxkkfw09832nvhjtxqyy"
    pause-tool-name="PAUSE_5_Second">
  </elevenlabs-convai>

  <!-- Load widget script -->
  <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async></script>

  <!-- Define your client tool AFTER the widget loads -->
  <script>
    window.addEventListener('elevenlabs-widget-ready', () => {
      const pauseTool = {
        name: "PAUSE_5_Second",
        execute: async ({ conversation, message, toolCall }) => {
          console.log("⏸️ Running 5 second pause...");
          await new Promise((resolve) => setTimeout(resolve, 5000));
          return {
            toolCallId: toolCall.toolCallId,
            isFinal: true,
            name: "PAUSE_5_Second",
            output: "Paused for 5 seconds."
          };
        }
      };

      // Register tool
      if (window?.ElevenLabsConAI?.clientTools?.register) {
        window.ElevenLabsConAI.clientTools.register([pauseTool]);
        console.log("✅ Tool registered: PAUSE_5_Second");
      } else {
        console.error("❌ Could not register tool: SDK not available");
      }
    });
  </script>
</body>
</html>
